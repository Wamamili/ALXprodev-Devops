MAX_RETRIES=3

for POKEMON in "${POKEMONS[@]}"; do
    echo "Fetching data for $POKEMON..."
    ATTEMPT=1
    SUCCESS=0
    while [ $ATTEMPT -le $MAX_RETRIES ]; do
        if curl -s -f "https://pokeapi.co/api/v2/pokemon/$POKEMON" -o "$DIR/$POKEMON.json"; then
            echo "Saved data to $DIR/$POKEMON.json ✅"
            SUCCESS=1
            break
        else
            echo "Retry $ATTEMPT for $POKEMON failed..."
            ((ATTEMPT++))
            sleep 2
        fi
    done
    if [ $SUCCESS -eq 0 ]; then
        echo "Failed to fetch $POKEMON after $MAX_RETRIES retries ❌" >> errors.txt
    fi
done
